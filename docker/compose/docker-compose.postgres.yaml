# ──────────────────────────────────────────────────────────────
# Postgres (Weaviate’s vector index)
# ──────────────────────────────────────────────────────────────
services:
  postgres:
    image: postgres:15
    container_name: weaviate_pg
    environment:
      POSTGRES_USER:      weaviate
      POSTGRES_PASSWORD:  weaviate
      POSTGRES_DB:        weaviate
    ports: ["5432:5432"]
    volumes: ["./data/postgres:/var/lib/postgresql/data"]
    healthcheck:
      test: ["CMD","pg_isready","-U","weaviate"]
      interval: 30s
      timeout: 5s
      retries: 3